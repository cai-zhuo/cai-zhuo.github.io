<html><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>HTTP入门 | CZh.IM</title><link rel="shortcut icon" href="https://czh.im/favicon.ico?v=1603811194261"><!-- <link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">--><link rel="stylesheet" href="https://czh.im/styles/main.css"><link rel="alternate" type="application/atom+xml" title="HTTP入门 | CZh.IM - Atom Feed" href="https://czh.im/atom.xml"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700"><meta name="description" content="HTTP 基本知识


http，超文本传输协议
在计算机网络中，两点之间传输文字，图片，视频等超文本数据的约定和规范


五大类HTTP状态码
1xx,提示信息，协议处理中的一种中间状态
2xx,成功处理了请求
3xx,请求的资源发生了变..." /><meta name="keywords" content="HTTP" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css"><script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script></head><body><div class="main"><div class="main-content"><div class="site-header"><a href="https://czh.im"><img class="avatar" src="https://czh.im/images/avatar.png?v=1603811194261" alt=""></a><h1 class="site-title">CZh.IM</h1><p class="site-description">watching myself</p><div class="menu-container"><a href="/" class="menu">首页</a><a href="/archives" class="menu">笔记</a><a href="/tags" class="menu">标签</a><a href="https://github.com/c739557637" class="menu" target="_blank">github</a></div><div class="social-container"></div><div class="site-footer">Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a><a class="rss" href="https://czh.im/atom.xml" target="_blank"><i class="ri-rss-line"></i>RSS</a></div></div><div class="post-detail"><article class="post"><h2 class="post-title">HTTP入门</h2><div class="post-info"><span>2020-04-04</span><span>5 min read</span><a href="https://czh.im/tag/wtUGKxinq/" class="post-tag">#HTTP</a></div><div class="post-content-wrapper"><div class="post-content"><h2 id="http-基本知识">HTTP 基本知识</h2>
<ol>
<li>
<p>http，超文本传输协议</p>
<p>在计算机网络中，<strong>两点</strong>之间<strong>传输</strong>文字，图片，视频等<strong>超文本</strong>数据的<strong>约定和规范</strong></p>
</li>
<li>
<p>五大类HTTP状态码</p>
<p><strong>1xx</strong>,提示信息，协议处理中的一种中间状态</p>
<p><strong>2xx</strong>,成功处理了请求</p>
<p><strong>3xx</strong>,请求的资源发生了变动，也就是重定向，也用于控制缓存（304 资源未修改）</p>
<p><strong>4xx</strong>,报文有误，服务端无法处理</p>
<p><strong>5xx</strong>，报文正确，服务端错误</p>
</li>
<li>
<p>常见的 HTTP字段</p>
<p>Host     发送请求时，指定服务器的域名</p>
<p>Content-Length  响应数据的长度，超过这个长度，就属于下一个请求了</p>
<p>Connection    	 表示长久连接，为了兼容老版本HTTP，值为Keep-Alive（默认）</p>
<p>Content-Type      表示响应数据的格式（text/html;charset=utf-8）</p>
<p>Accept                  表示请求接受的数据格式</p>
<p>Content-Encoding     说明数据的压缩方法</p>
<p>Accept-Encoding		希望数据的压缩方法（gzip，deflate）</p>
</li>
</ol>
<h2 id="get和post">GET和POST</h2>
<ul>
<li>
<p>GET 表示获取资源</p>
<p>安全且幂等</p>
</li>
<li>
<p>POST 表示提交数据</p>
<p>不安全，不幂等</p>
</li>
<li>
<p>安全</p>
<p>请求不会破坏服务器上的资源</p>
</li>
<li>
<p>幂等</p>
<p>多次请求，结果相同</p>
</li>
</ul>
<h2 id="http特性">HTTP特性</h2>
<ol>
<li>
<p>简单</p>
<p>报文格式简单：head+body</p>
</li>
<li>
<p>灵活易拓展</p>
<p>各类请求方法，URI/URL，状态码，头字段，都没有被固定死，允许开发人员自行扩充</p>
<p>同时  HTTP  工作在应用层，下层可以随意变化，比如 HTTPS 就是在HTTP和TCP之间加入了SSL/TLS安全传输层，HTTP3甚至把TCP换成了基于UDP的QUIC</p>
</li>
<li>
<p>应用广泛和跨平台</p>
</li>
<li>
<p>无状态</p>
<ul>
<li>导致了业务逻辑复杂</li>
<li>减轻服务器压力</li>
</ul>
</li>
<li>
<p>明文传输</p>
<ul>
<li>调试方便</li>
<li>不安全</li>
</ul>
</li>
<li>
<p>不安全</p>
<ul>
<li>通信使用明文</li>
<li>不验证通信方身份</li>
<li>不验证报文完整性</li>
</ul>
</li>
</ol>
<h2 id="http性能">HTTP性能</h2>
<ol>
<li>
<p>长连接</p>
<p>由于每次tcp的连接断开都需要三次握手和四次挥手，所以反复的连接和断开会造成性能的损耗</p>
<p>于是采用长连接的策略</p>
</li>
<li>
<p>管道网络传输</p>
<p>不必等待第一个请求响应完成，即可发出第二个请求，减少了整体的响应时间，但目前为止，服务端仍然是按顺序依次响应。</p>
</li>
<li>
<p>队头阻塞</p>
<p>当一个请求被阻塞，会导致后续的请求同样被阻塞</p>
</li>
</ol>
<h2 id="http-与-https">HTTP 与 HTTPS</h2>
<h3 id="https-特点">HTTPS 特点</h3>
<ul>
<li>在HTTP的基础上，加入了 SSL/TSL协议。</li>
<li>在TCP三次握手的基础上，进行SSL/TSL的四次握手过程，才进入加密报文传输过程。</li>
<li>HTTP的端口号是80，HTTPS的端口号是443</li>
<li>HTTPS需要向CA申请数字证书，来保证服务器自身是可信的</li>
</ul>
<h3 id="https-解决的问题">HTTPS 解决的问题</h3>
<ul>
<li>
<p>窃听风险（信息加密）----混合加密</p>
</li>
<li>
<p>篡改风险（完整性验证）----摘要算法</p>
</li>
<li>
<p>冒充风险（身份验证） --- 数字证书</p>
</li>
</ul>
<h2 id="过程">过程</h2>
<p>​	在进行TCP的三次握手之后，进行SSL的四次握手，双方交换信息以及随机数，获取服务端的证书，以及加密过后的随机数（pre-master key），通过pre-master来生成会话密钥，之后一直采用会话密钥进行加密</p>
<h2 id="演变">演变</h2>
<ol>
<li>
<p>HTTP</p>
<p>1.1 相比1.0 的改进</p>
<ul>
<li>增加了 PUT，DELETE 等新的方法</li>
<li>增加了缓存管理和控制</li>
<li>明确了连接管理，允许持久连接</li>
<li>允许响应数据分块，利于大文件传输</li>
<li>强制要求Host头，使得互联网主机托管成为可能</li>
<li>管道网络传输</li>
</ul>
<p>性能瓶颈</p>
<ul>
<li>响应头部未压缩就发送，首部信息越多延迟越大</li>
<li>发送冗长的信息，每次互相发送相同的消息会造成浪费</li>
<li>队头阻塞</li>
<li>没有优先级控制</li>
<li>只能从客户端请求，服务端响应</li>
</ul>
</li>
<li>
<p>HTTP/2</p>
<p>相比 1.1 的改进</p>
<ul>
<li>
<p>头部压缩</p>
</li>
<li>
<p>HPACK,客户端和服务端同时维护一张头部信息表，发送请求只需要发送索引号即可</p>
</li>
<li>
<p>二进制格式，头部和数据体统称为帧：头信息帧和数据帧。</p>
<p>增加了数据传输的效率</p>
</li>
<li>
<p>数据流<br>
一次长连接里面连续的数据包可能属于不同的响应，可以指定数据流的优先级</p>
</li>
<li>
<p>多路复用 ，废弃管道<br>
一次连接中可以<strong>并发</strong>多个请求或响应，不会出现<strong>对头阻塞</strong>问题，降低了延迟，提高了利用率<br>
服务器推送   主动向客户端发送消息</p>
</li>
<li>
<p>增强了安全行， 要求加密通信</p>
</li>
</ul>
<p>缺陷</p>
<ul>
<li>
<p>由于多个HTTP请求复用一个TCP连接，一旦发生丢包现象，就会触发TCP的重传机制。所有请求都等待丢了的包重传回来。</p>
<p>HTTP/1.1 ，一个请求阻塞，后续的请求也会阻塞</p>
<p>HTTP/2   一个请求丢包，会阻塞所有请求</p>
<p>原因是基于TCP的传输层</p>
</li>
</ul>
</li>
<li>
<p>HTTP/3</p>
<ul>
<li>
<p>改进</p>
<p>将TCP协议换成UDP协议，并使用QUIC协议来实现类似TCP的可靠传输</p>
<p>最终使得，某个流发生丢包，只会阻塞当前流，不会阻塞其他数据流</p>
<p>并且将TCP的三次握手和TLS1.3+的三次握手合并为三次</p>
</li>
</ul>
</li>
</ol>
</div><div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#http-%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86">HTTP 基本知识</a></li>
<li><a href="#get%E5%92%8Cpost">GET和POST</a></li>
<li><a href="#http%E7%89%B9%E6%80%A7">HTTP特性</a></li>
<li><a href="#http%E6%80%A7%E8%83%BD">HTTP性能</a></li>
<li><a href="#http-%E4%B8%8E-https">HTTP 与 HTTPS</a>
<ul>
<li><a href="#https-%E7%89%B9%E7%82%B9">HTTPS 特点</a></li>
<li><a href="#https-%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98">HTTPS 解决的问题</a></li>
</ul>
</li>
<li><a href="#%E8%BF%87%E7%A8%8B">过程</a></li>
<li><a href="#%E6%BC%94%E5%8F%98">演变</a></li>
</ul>
</li>
</ul>
</div></div></article><div class="next-post"><div class="next">下一篇</div><a href="https://czh.im/post/event-loop/"><h3 class="post-title">EVENT LOOP</h3></a></div></div><!-- <div class="site-footer">Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a><a class="rss" href="https://czh.im/atom.xml" target="_blank"><i class="ri-rss-line"></i>RSS</a></div> --></div></div><script>
        hljs.initHighlightingOnLoad()
        let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");
        // This should probably be throttled.
        // Especially because it triggers during smooth scrolling.
        // https://lodash.com/docs/4.17.10#throttle
        // You could do like...
        // window.addEventListener("scroll", () => {
        //    _.throttle(doThatStuff, 100);
        // });
        // Only not doing it here to keep this Pen dependency-free.
        window.addEventListener("scroll", event => {
            let fromTop = window.scrollY;
            mainNavLinks.forEach((link, index) => {
                let section = document.getElementById(decodeURI(link.hash).substring(1));
                let nextSection = null
                if (mainNavLinks[index + 1]) {
                    nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
                }
                if (section.offsetTop <= fromTop) {
                    if (nextSection) {
                        if (nextSection.offsetTop > fromTop) {
                            link.classList.add("current");
                        } else {
                            link.classList.remove("current");
                        }
                    } else {
                        link.classList.add("current");
                    }
                } else {
                    link.classList.remove("current");
                }
            });
        });
    </script></body></html>